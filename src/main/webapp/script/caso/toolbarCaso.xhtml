<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:go="http://java.sun.com/jsf/composite/go">

    <h:form id="botoneraCaso">

        <div class="row">

            <div class="btn-toolbar wide-btns pull-left" role="toolbar">
                <div class="btn-group">
                    <h:commandLink title="Volver" action="inbox" styleClass="btn btn-default">
                        <i class="fa fa-chevron-left"></i>
                    </h:commandLink>

                    <h:commandLink title="#{bundle.EditCasoLabel_idCasoPadre}: #{casoController.selected.idCasoPadre.tipoCaso.nombre} N°#{casoController.selected.idCasoPadre.idCaso} - #{casoController.selected.idCasoPadre.tema}" 
                                   rendered="#{casoController.selected.idCasoPadre ne null}" 
                                   action="#{casoController.filterByIdCaso(casoController.selected.idCasoPadre.idCaso)}" styleClass="btn btn-default">
                        <i class="fa fa-level-up"></i>
                    </h:commandLink>
               
                    <h:commandLink title="Actualizar" 
                                   actionListener="#{casoController.refreshCurrentCaso()}" styleClass="btn btn-default">
                        <i class="fa fa-refresh"></i>
                    </h:commandLink>

                </div>
          

                 <div class="btn-group">
                    <p:commandLink rendered="#{casoController.verificarCrearActividad()}"
                                   styleClass="btn btn-default" actionListener="#{casoController.enableCommentMode()}"
                                   disabled="#{casoController.selected.closed}"
                                   update=":message-details-reply"
                                   ajax="true" title="Agregar un Comentario"  >
                        <i class="fa fa-comment"></i>         
                    </p:commandLink>
             
                    <p:commandLink rendered="#{casoController.verificarCrearActividad()}"
                                   styleClass="btn btn-default" actionListener="#{casoController.enableReplyMode(false)}"
                                   disabled="#{casoController.selected.closed}"
                                   update=":message-details-reply"
                                   ajax="true" title="Reply"  >
                        <i class="fa fa-reply"></i>         
                    </p:commandLink>
              
                    <p:commandLink rendered="#{casoController.verificarCrearActividad()}"
                                   styleClass="btn btn-default" actionListener="#{casoController.enableReplyMode(true)}"
                                   disabled="#{casoController.selected.closed}"
                                   update=":message-details-reply"
                                   ajax="true" title="Reply All"  >
                        <i class="fa fa-reply-all"></i>         
                    </p:commandLink>
                </div>
               


                <div class="btn-group">
                    <p:commandLink rendered="#{casoController.verificarTomarCaso()}"
                                   styleClass="btn btn-default" type="button"
                                   ajax="true" title="Asignármelo" onclick="tomarCaso.show()" >
                        <i class="fa fa-inbox"></i>         
                    </p:commandLink>
                </div>
                <div class="btn-group">
                    <p:commandLink rendered="#{casoController.verificarReabrirCaso()}"
                                   styleClass="btn btn-default" 
                                   ajax="true" title="Reabrir Caso" onclick="openCase.show();" >
                        <i class="fa fa-folder-open-o"></i>         
                    </p:commandLink>
                </div>
                <div class="btn-group">
                    <p:commandLink id="TagAsBtn" title="Etiquetas" 
                                   styleClass="btn btn-default" onclick="TagPanel.loadContents()">
                        <i class="fa fa-tags"></i>
                    </p:commandLink>

                    <p:overlayPanel id="TagPanel" widgetVar="TagPanel" for="TagAsBtn" hideEffect="fade" dynamic="true">                                     

                        <p:autoComplete id="tags" 
                                        value="#{casoController.selected.etiquetaStringList}" forceSelection="true" 
                                        completeMethod="#{applicationBean.findEtiquetasByPattern}" multiple="true">
                            <p:ajax  event="itemSelect"  listener="#{casoController.tagItemSelectEvent}"  update=":botoneraCaso:etiquetasGroup"  />
                            <p:ajax  event="itemUnselect"  listener="#{casoController.tagItemUnselectEvent}"  update=":botoneraCaso:etiquetasGroup"  />
                        </p:autoComplete>
                        <p:watermark for="tags" value="Etiquetas"/>

                    </p:overlayPanel>  

                    <p:commandLink id="TasksBtn" title="Tareas" styleClass="btn btn-default" onclick="PF('TareasDialog').show()">
                        <i class="fa fa-tasks"></i>
                    </p:commandLink>

                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span> <i class="fa fa-caret-down"></i></button>

                    <ul class="dropdown-menu">
                        <li>
                            <p:commandLink ajax="false" 
                                           title="Copiar Caso" action="#{casoController.prepareCopy()}">
                                <i class="fa fa-copy"></i> Copiar        
                            </p:commandLink>
                        </li>
                        <li>
                            <p:commandLink ajax="false" 
                                           title="Copiar y Asignármelo" action="#{casoController.prepareCopyAndAssignMe()}">
                                <i class="fa fa-copy"></i> Copiar y Asignármelo        
                            </p:commandLink>
                        </li>
                        <li>
                            <p:commandLink rendered="#{casoController.verificarTransferirCaso()}"
                                           ajax="true" title="Transferir" onclick="transferir.show();">
                                <i class="fa fa-users"></i> Transferir        
                            </p:commandLink>
                        </li>
                        <li>
                            <p:commandLink rendered="#{casoController.verificarCrearColaborativo()}"
                                           ajax="false" title="Crear Caso Colaborativo" 
                                           action="#{casoController.crearCasoColab(casoController.selected)}">
                                <i class="fa fa-ambulance"></i> Crear Caso Colaborativo        
                            </p:commandLink>
                        </li>
                        <li>
                            <p:commandLink rendered="#{casoController.verificarAsignarCaso()}"
                                           ajax="true" title="Asignar" onclick="transferir.show();">
                                <i class="fa fa-users"></i> Asignar        
                            </p:commandLink>
                        </li>
                        <li>
                            <p:commandLink rendered="#{casoController.verificarRelacionarCaso()}"
                                           ajax="true" title="Relacionar Caso" onclick="casosRela.show();">
                                <i class="fa fa-random"></i> Relacionar a otro Caso        
                            </p:commandLink>
                        </li>

                        <li>
                            <p:commandLink rendered="#{casoController.verificarCerrarCaso()}"
                                           ajax="true" title="Cerrar Caso" onclick="closeCase.show();">
                                <i class="fa fa-stop"></i> Cerrar Caso      
                            </p:commandLink>
                        </li>

                        <li class="divider"></li>
                        <li>
                            <p:commandLink rendered="#{casoController.verificarEliminarCaso()}"
                                           ajax="true" title="Eliminar Caso" onclick="destroyCase.show();">
                                <i class="fa fa-trash-o"></i> Eliminar Caso
                            </p:commandLink>
                        </li>


                    </ul>
                </div>
            </div>

        </div>



    </h:form>

</ui:composition>
