<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/script/template_inbox.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.ListCasoTitle}"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <h:form>

                <h:outputText escape="false" value="#{bundle.ListCasoEmpty}" rendered="#{casoController.items.rowCount == 0}"/>
                <h:panelGroup rendered="#{casoController.items.rowCount > 0}">
                    <h:outputText value="#{casoController.pagination.pageFirstItem + 1}..#{casoController.pagination.pageLastItem + 1}/#{casoController.pagination.itemsCount}"/>&nbsp;
                    <h:commandLink action="#{casoController.previous}" value="#{bundle.Previous} #{casoController.pagination.pageSize}" rendered="#{casoController.pagination.hasPreviousPage}"/>&nbsp;
                    <h:commandLink action="#{casoController.next}" value="#{bundle.Next} #{casoController.pagination.pageSize}" rendered="#{casoController.pagination.hasNextPage}"/>&nbsp;

                    <p:dataTable widgetVar="CasoTable" var="item" value="#{casoController.items}"
                                 selection="#{casoController.selectedItems}" selectionMode="multiple" 
                                 emptyMessage="#{bundle.ListCasoEmpty}" scrollable="true"
                                 resizableColumns="true" 
                                 rowKey="#{item.idCaso}">

                        <f:facet name="header">  
                            <h:outputText value="#{bundle.ListCasoTitle}"></h:outputText>                           
                        </f:facet>   

                        <p:column style="width:125px" sortBy="#{item.idCaso}" filterBy="#{item.idCaso}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idCaso}">
                            <h:outputText value="#{item.idCaso}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.tema}" filterBy="#{item.tema}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_tema}">
                            <h:outputText value="#{item.tema}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.descripcion}" filterBy="#{item.descripcion}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_descripcion}">
                            <h:outputText value="#{item.descripcion}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.emailCliente}" filterBy="#{item.emailCliente}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_emailCliente}">
                            <h:outputText value="#{item.emailCliente}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.rutCliente}" filterBy="#{item.rutCliente}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_rutCliente}">
                            <h:outputText value="#{item.rutCliente}"/>
                        </p:column>
                       
                        <p:column style="width:125px" sortBy="#{item.tranferCount}" filterBy="#{item.tranferCount}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_tranferCount}">
                            <h:outputText value="#{item.tranferCount}"/>
                        </p:column>

                        <p:column style="width:125px" sortBy="#{item.nextResponseDue}" filterBy="#{item.nextResponseDue}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_nextResponseDue}">
                            <h:outputText value="#{item.nextResponseDue}">
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </h:outputText>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.estadoEscalacion}" filterBy="#{item.estadoEscalacion}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_estadoEscalacion}">

                            <h:outputText value="#{item.estadoEscalacion}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.esPregConocida}" filterBy="#{item.esPregConocida}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_esPregConocida}">
                            <h:outputText value="#{item.esPregConocida}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.fechaCreacion}" filterBy="#{item.fechaCreacion}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_fechaCreacion}">
                            <h:outputText value="#{item.fechaCreacion}">
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </h:outputText>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.fechaModif}" filterBy="#{item.fechaModif}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_fechaModif}">
                            <h:outputText value="#{item.fechaModif}">
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </h:outputText>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.fechaRespuesta}" filterBy="#{item.fechaRespuesta}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_fechaRespuesta}">
                            <h:outputText value="#{item.fechaRespuesta}">
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </h:outputText>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.respuesta}" filterBy="#{item.respuesta}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_respuesta}">
                            <h:outputText value="#{item.respuesta}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.esPrioritario}" filterBy="#{item.esPrioritario}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_esPrioritario}">
                            <h:outputText value="#{item.esPrioritario}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.owner}" filterBy="#{item.owner}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_owner}">
                            <h:outputText value="#{item.owner}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idSubEstado}" filterBy="#{item.idSubEstado}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idSubEstado}">
                            <h:outputText value="#{item.idSubEstado}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idRazon}" filterBy="#{item.idRazon}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idRazon}">
                            <h:outputText value="#{item.idRazon}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idPrioridad}" filterBy="#{item.idPrioridad}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idPrioridad}">
                            <h:outputText value="#{item.idPrioridad}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idEstado}" filterBy="#{item.idEstado}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idEstado}">
                            <h:outputText value="#{item.idEstado}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idCategoria}" filterBy="#{item.idCategoria}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idCategoria}">
                            <h:outputText value="#{item.idCategoria}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idCasoPadre}" filterBy="#{item.idCasoPadre}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idCasoPadre}">

                            <h:outputText value="#{item.idCasoPadre}"/>
                        </p:column>
                        <p:column style="width:125px" sortBy="#{item.idCanal}" filterBy="#{item.idCanal}" filterMatchMode="contains" headerText="#{bundle.ListCasoTitle_idCanal}">

                            <h:outputText value="#{item.idCanal}"/>
                        </p:column>

                        <f:facet name="footer">
                            <p:commandButton ajax="false" action="#{casoController.prepareCreate}" value="#{bundle.ListCasoCreateLink}" icon="ui-icon ui-icon-plus" />
                            <h:outputText value=" "/>
                            <p:commandButton ajax="false" action="#{casoController.prepareView}" value="#{bundle.ListCasoViewLink}" icon="ui-icon ui-icon-search"/>
                            <h:outputText value=" "/>
                            <p:commandButton ajax="false" action="#{casoController.prepareEdit}" value="#{bundle.ListCasoEditLink}" icon="ui-icon ui-icon-pencil"/>
                            <h:outputText value=" "/>
                            <p:commandButton ajax="false" action="#{casoController.destroySelected()}" value="#{bundle.ListCasoDestroyLink}" icon="ui-icon ui-icon-close" />
                            <h:outputText value=" "/>
                            <p:commandButton value="Eliminar (not working yet)" icon="ui-icon ui-icon-close" onclick="delete_Caso_confirmation.show()" type="button"/>                        
                        </f:facet> 
                    </p:dataTable>
                </h:panelGroup>

                <br />
                <p:commandButton ajax="false" action="#{casoController.prepareCreate}" value="#{bundle.ListCasoCreateLink}" 
                                 rendered="#{casoController.items.rowCount == 0}" icon="ui-icon ui-icon-plus"/>

                <p:confirmDialog message="Esta Seguro de eliminar estos registros ?" appendTo="@(body)"
                                 header="Iniciando proceso de eliminacion" severity="alert" widgetVar="delete_Caso_confirmation">

                    <p:commandButton value="Si" update=":mainform:messages" oncomplete="delete_Caso_confirmation.hide()"
                                     action="Expression usuarioController is undefined on line 95, column 48 in unknown." ajax="false" />
                    <p:commandButton value="Eliminar" onclick="delete_Caso_confirmation.hide()" type="button" /> 

                </p:confirmDialog>

            </h:form>
        </ui:define>
    </ui:composition>

</html>
