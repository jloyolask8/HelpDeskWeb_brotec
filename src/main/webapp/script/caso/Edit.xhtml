<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:go="http://java.sun.com/jsf/composite/go">

    <ui:composition template="/script/template_inbox_bootstrap.xhtml">
        <ui:define name="title">
            <h:outputText value="Caso #{casoController.selected.idCaso}: #{casoController.selected.tema}"></h:outputText>
        </ui:define>

        <ui:define name="head">

            <style type="text/css">

                .ui-dialog .ui-dialog-content {
                    padding: 0 !important;
                }

            </style>

        </ui:define>

        <ui:define name="body">

            <h:form id="botoneraCaso">
                <div class="page-header">
                    <div class="row padding-sm">


                        <h:commandLink id="prio" disabled="#{casoController.selected.closed}" styleClass="valign-middle m-details-star">
                            <p:graphicImage library="images" name="#{casoController.selected.esPrioritario ? 'star-enabled.png':'star-disabled.png'}" title="Importante!"/>
                            <p:ajax id="aj2" listener="#{casoController.changePriority(casoController.selected, casoController.selected.esPrioritario)}" update="prio"/>
                        </h:commandLink>

                        <!--estado ABIERTO - CERRADO -->
                        <h:outputText value="#{casoController.selected.idEstado.nombre}" title="#{casoController.selected.estadoAlerta.nombre}" 
                                      rendered="#{casoController.selected.isOpen()}" styleClass="valign-middle label label-#{casoController.selected.estadoAlerta.styleClass}">
                        </h:outputText>                       
                        <h:outputText value="#{casoController.selected.idEstado.nombre}" title="Caso cerrado" 
                                      rendered="#{not casoController.selected.isOpen()}" styleClass="valign-middle label label-default">
                        </h:outputText>   
                        <!--fin estado ABIERTO - CERRADO -->
                        <h1 class="valign-middle">
                            <h:outputText value="#{casoController.selected.tipoCaso ne null ? casoController.selected.tipoCaso.nombre:'Caso' } \##{casoController.selected.idCaso}: "/>
                            <h:outputText styleClass="text-semibold" 
                                          value="#{casoController.selected.tema}"/>
                        </h1>

                        <!-- fin TAGS-->
                        <div class="pull-right">

                            <ui:include src="toolbarCaso.xhtml" />


                        </div>
                    </div>
                </div> <!-- / .page-header -->
            </h:form>



            <div class="row">

                <div class="col-sm-7 col-md-8 col-lg-9  main">

                    <ui:include src="responder.xhtml" />
                    <ui:include src="actividadesListForm.xhtml" />

                </div>

                <div class="col-md-4 col-sm-5 col-lg-3  sidebar"><!-- menu-right -->

                    <ui:include src="info-panel.xhtml"/>

                    <!--Propiedades del caso-->
                    <div class="panel-group" id="accordion-example">
                        <div class="panel">
                            <div class="panel-heading">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-example" href="#collapseOne">
                                    Propiedades del caso
                                </a>
                            </div> <!-- / .panel-heading -->
                            <div id="collapseOne" class="panel-collapse in"> 

                                <h:form id="formint1" styleClass="panel">

                                    <div class="panel-body" style="padding: 10px !important;">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr" >
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="Tipo:" for="idTipoCaso"/>
                                                    <h:selectOneMenu id="idTipoCaso"  styleClass="form-control input-sm" disabled="#{casoController.selected.closed}" 
                                                                     required="true" requiredMessage="El tipo de caso es requerido."
                                                                     converter="TipoCasoControllerConverter"
                                                                     value="#{casoController.selected.tipoCaso}" >
                                                        <f:selectItems value="#{applicationBean.tipoCasoAvailableList}" var="tipo" 
                                                                       itemLabel="#{tipo.nombre}" itemValue="#{tipo}" itemDescription="#{tipo.descripcion}"/>
                                                        <p:ajax update=":formint1"/>

                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr">
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="#{bundle.EditCasoLabel_idPrioridad}" for="idPrioridad" />
                                                    <h:selectOneMenu styleClass="form-control input-sm" disabled="#{casoController.selected.closed}"
                                                                     required="true"
                                                                     id="idPrioridad" value="#{casoController.selected.idPrioridad}" >
                                                        <f:selectItems value="#{prioridadController.itemsAvailableSelectMany}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->

                                        </div><!-- row -->

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr" >
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="Area" for="idAreaCaso"/>
                                                    <h:selectOneMenu id="idAreaCaso" disabled="#{casoController.selected.closed}" styleClass="form-control input-sm" 
                                                                     value="#{casoController.selected.idArea}" >
                                                        <f:selectItem itemLabel="" itemValue=""/>
                                                        <f:selectItems value="#{applicationBean.areasAvailableList}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo}" itemDescription="#{tipo.descripcion}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr">
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="Grupo" for="idGrupoCaso" />
                                                    <h:selectOneMenu id="idGrupoCaso" styleClass="form-control input-sm"
                                                                     value="#{casoController.selected.idGrupo}"
                                                                     disabled="#{casoController.selected.closed or empty casoController.selected.idArea}">
                                                        <f:selectItem itemLabel="" itemValue="" />
                                                        <f:selectItems value="#{casoController.selected.idArea.grupoList}" 
                                                                       var="grupo" itemLabel="#{grupo.nombre}" itemValue="#{grupo}" itemDescription="#{grupo.descripcion}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->

                                        </div><!-- row -->


                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr">
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="#{applicationBean.productDescription}:" for="idProducto" />
                                                    <h:selectOneMenu styleClass="form-control input-sm" disabled="#{casoController.selected.closed}" id="idProducto" 
                                                                     value="#{casoController.selected.idProducto}" >
                                                        <f:selectItems value="#{productoController.itemsAvailableSelectOne}"/>
                                                        <p:ajax update="idComponente modeloProductoId"  listener="#{casoController.handleProductChange}" />
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr">
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="Modelo:" for="modeloProductoId" />
                                                    <h:selectOneMenu styleClass="form-control input-sm" id="modeloProductoId" disabled="#{casoController.selected.closed}"
                                                                     value="#{casoController.selected.idModelo}" >
                                                        <f:selectItem itemLabel="" itemValue=""/>
                                                        <f:selectItems value="#{casoController.selected.idProducto.modeloProductoList}" var="m" itemValue="#{m}" itemLabel="#{m.nombre}"/>
                                                        <p:ajax update="idComponente"  listener="#{casoController.onProductoModeloChosen()}" />
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr">
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="#{applicationBean.productComponentDescription}:" 
                                                                   for="idComponente" />
                                                    <h:selectOneMenu styleClass="form-control input-sm" id="idComponente"  value="#{casoController.selected.idComponente}"
                                                                     disabled="#{casoController.selected.closed or casoController.selected.idProducto eq null}">
                                                        <f:selectItem itemLabel="" itemValue=""/>
                                                        <f:selectItems value="#{casoController.selected.idProducto.componenteList}" var="comp" itemLabel="#{comp.nombre}" itemValue="#{comp}"/>
                                                        <p:ajax update="idSubComponente"  listener="#{casoController.handleProductChange}" />  
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->
                                            <div class="col-sm-6">
                                                <div class="form-group no-margin-hr">
                                                    <h:outputLabel styleClass="control-label text-sm text-slim"
                                                                   value="#{applicationBean.productSubComponentDescription}:" for="idSubComponente" />
                                                    <h:selectOneMenu styleClass="form-control input-sm" id="idSubComponente" value="#{casoController.selected.idSubComponente}"  
                                                                     disabled="#{casoController.selected.closed or casoController.selected.idComponente eq null}">
                                                        <f:selectItem itemLabel="" itemValue=""/>
                                                        <f:selectItems value="#{casoController.selected.idComponente.subComponenteList}" var="subc" itemLabel="#{subc.nombre}" itemValue="#{subc}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                            </div><!-- col-sm-6 -->
                                        </div>
                                        <ui:repeat id="tableCustomFields" var="customField" value="#{customFieldController.getCurrentCasoCustomFieldList(casoController.selected)}">

                                            <div class="row form-group">
                                                <label class="col-sm-12 control-label text-sm text-slim">
                                                    <h:outputLabel value="#{customField.customField.label}:" for="customFieldI"/>
                                                </label>
                                                <div class="col-sm-12">
                                                    <go:customField id="customFieldI" casoCustomFieldValue="#{customField}" casoOpen="#{casoController.selected.isOpen()}"/>
                                                </div>
                                            </div>
                                        </ui:repeat>

                                    </div>
                                    <div class="panel-footer text-right">
                                        <p:commandLink disabled="#{casoController.selected.closed or not (casoController.verificarGrabarCaso())}" 
                                                       styleClass="btn btn-primary"
                                                       onclick="jQuery(this).addClass('ui-state-disabled');
                                                               jQuery(this).children().addClass('fa fa-refresh fa-spin')"
                                                       ajax="true" update="@this @(.panel) @(.ui-panel) @(form)" action="#{casoController.update}" >
                                            <i class=""></i> Guardar
                                        </p:commandLink>
                                    </div>
                                </h:form>





                            </div> <!-- / .collapse -->
                        </div> <!-- / .panel -->



                        <div class="panel">
                            <div class="panel-heading">
                                <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion-example" href="#casosHijosList">
                                    Sub casos (#{casoController.selected.casosHijosList.size()})
                                </a>
                            </div> <!-- / .panel-heading -->
                            <div id="casosHijosList" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <h:form id="formSubCasos" rendered="#{casoController.selected.casosHijosList.size() gt 0}">
                                        <h:panelGrid columns="1">
                                            <c:forEach items="#{casoController.selected.casosHijosList}" var="itemS" >
                                                <h:commandLink action="#{casoController.filterByIdCaso(itemS.idCaso)}">                                                        
                                                    <h:outputText styleClass="label" 
                                                                  style="background: \##{itemS.idSubEstado.backgroundColor}; color: \##{itemS.idSubEstado.fontColor};" value="#{itemS.idSubEstado.nombre}"/>
                                                    <h:outputText value=" #{itemS.tipoCaso.nombre} N°#{itemS.idCaso} - #{itemS.tema}"/>
                                                </h:commandLink>
                                                <p:separator/>
                                            </c:forEach>
                                        </h:panelGrid>
                                    </h:form>
                                    <h:outputText value="No hay sub casos" rendered="#{casoController.selected.casosHijosList.size() le 0}"/>
                                </div> <!-- / .panel-body -->
                            </div> <!-- / .collapse -->
                        </div> <!-- / .panel -->

                        <div class="panel">
                            <div class="panel-heading">
                                <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion-example" href="#casosRelacionadosList">
                                    Casos relacionados (#{casoController.selected.casosRelacionadosList.size()})
                                </a>
                            </div> <!-- / .panel-heading -->
                            <div id="casosRelacionadosList" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <h:form id="formCasosRel" rendered="#{casoController.selected.casosRelacionadosList.size() gt 0}">
                                        <h:panelGrid columns="1">
                                            <c:forEach items="#{casoController.selected.casosRelacionadosList}" var="item" >
                                                <h:commandLink action="#{casoController.filterByIdCaso(item.idCaso)}">                                                        
                                                    <h:outputText styleClass="label" 
                                                                  style="background: \##{item.idSubEstado.backgroundColor}; color: \##{item.idSubEstado.fontColor};" value="#{item.idSubEstado.nombre}"/>
                                                    <h:outputText value=" #{item.tipoCaso.nombre} N°#{item.idCaso} - #{item.tema}"/>
                                                </h:commandLink>
                                                <p:separator/>
                                            </c:forEach>
                                        </h:panelGrid>
                                    </h:form>
                                    <h:outputText value="No hay casos relacionados" rendered="#{casoController.selected.casosRelacionadosList.size() le 0}"/>


                                </div> <!-- / .panel-body -->
                            </div> <!-- / .collapse -->
                        </div> <!-- / .panel -->


                        <div class="panel">

                            <div class="panel-heading">
                                <h:panelGroup id="tab-adjuntos-panel">
                                    <a id="title-tab-adjuntos" class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion-example" href="#tab-adjuntos">
                                        Archivos adjuntos (#{casoController.selected.cantidadAttachment})
                                    </a>
                                </h:panelGroup>


                            </div> <!-- / .panel-heading -->
                            <div id="tab-adjuntos" class="panel-collapse collapse">


                                <h:form id="formlistaadjuntos">
                                    <h:panelGroup id="listaadjuntos" layout="block" rendered="#{not empty casoController.selected.attachmentList}">


                                        <ul class="list-group no-margin">

                                            <ui:repeat var="fileitem" value="#{casoController.selected.attachmentList}" >
                                                <h:panelGroup rendered="#{fileitem.contentId eq null}">
                                                    <li class="list-group-item no-border-hr padding-xs-hr">
                                                        <div class="row padding-xs-hr">
                                                            <p:graphicImage name="file_extension_#{fileitem.fileExtension}.png" library="file_extension_icons" />

                                                            <h:outputText value=" #{casoController.nombreArchivoParaDesplegar(fileitem.nombreArchivo)}" 
                                                                          styleClass="text-semibold"
                                                                          title="#{fileitem.nombreArchivo} (#{fileitem.fileSizeHuman})"/> 

                                                            <h:outputText value="#{fileitem.fileSizeHuman}  " style="color: #7A7A7A" styleClass="pull-right"/>
                                                        </div>
                                                        <div class="row">
                                                            <p:commandLink styleClass="col-xs-1" ajax="false">
                                                                <i class="fa fa-download list-group-icon" title="Download"></i>
                                                                <p:fileDownload contentDisposition="attachment" value="#{casoController.bajarArchivo(fileitem.idAttachment)}" />
                                                            </p:commandLink>
                                                            <p:commandLink styleClass="col-xs-1"  
                                                                           onclick="PF('borrarAttachment').show();"
                                                                           disabled="#{not casoController.verificarGrabarCaso()}">
                                                                <i class="fa fa-times list-group-icon" title="Delete"></i>
                                                                <f:setPropertyActionListener target="#{casoController.idFileDelete}" value="#{fileitem.idAttachment}"/>
                                                            </p:commandLink>

                                                            <p:lightBox  iframe="true" rendered="#{fileitem.imageOrPDF}"> 
                                                                <h:outputLink styleClass="col-xs-1" value="#{facesContext.externalContext.requestContextPath}/DownloadFileServlet?tenant=#{UserSessionBean.tenantId}&amp;id=#{fileitem.idAttachment}" 
                                                                              title="Preview">  
                                                                    <i class="fa fa-external-link-square list-group-icon"></i>
                                                                </h:outputLink>
                                                            </p:lightBox>
                                                        </div>


                                                    </li>
                                                </h:panelGroup>

                                            </ui:repeat>
                                        </ul>


                                    </h:panelGroup>


                                    <p:fileUpload id="fileupload"
                                                  sizeLimit="5242880"
                                                  invalidSizeMessage="El archivo excede el tamaño maximo: 5MB."
                                                  fileUploadListener="#{casoController.subir}"
                                                  disabled="#{not casoController.verificarGrabarCaso()}"
                                                  label="Adjuntar (seleccionar o arrastrar aquí) ..."
                                                  uploadLabel="Subir"
                                                  cancelLabel="Cancelar Subida"
                                                  invalidFileMessage="Archivo Invalido." 
                                                  mode="advanced"
                                                  dragDropSupport="true"
                                                  auto="true"
                                                  update=":mainform:messages :formlistaadjuntos :tab-adjuntos-panel :message-details-reply"
                                                  multiple="true"  
                                                  rendered="#{casoController.selected.open}"/>


                                    <p:tooltip for=":formlistaadjuntos:fileupload" value="Sugerencia: Arrastre y suelte los archivos en esta área del caso para adjuntarlos."/>


                                </h:form>

                            </div> <!-- / .collapse -->

                        </div> <!-- / .panel -->

                    </div>

                    <!-- Agenda -->
                    <div class="panel no-border panel-dark">
                        <div class="panel-body no-padding">
                            <h:form id="formAgendarEvento">
                                <p:schedule id="myschedule" value="#{casoScheduleController.lazyScheduleEventsModel}" 
                                            showHeader="#{not casoController.mobileClient}"
                                            slotMinutes="60" centerHeaderTemplate="none"
                                            leftHeaderTemplate="prev,next"
                                            firstHour="8" widgetVar="myschedule" >
                                    <p:ajax event="dateSelect" listener="#{casoScheduleController.onDateSelect}" 
                                            update=":createEventForm" oncomplete="PF('createEventDialog').show()" />  
                                    <p:ajax event="eventSelect" listener="#{casoScheduleController.onEventSelect}" 
                                            update=":createEventForm" oncomplete="PF('createEventDialog').show()" />  

                                    <p:ajax event="eventMove" listener="#{casoScheduleController.onEventMove}" update=":mainform:messages" />  
                                    <p:ajax event="eventResize" listener="#{casoScheduleController.onEventResize}" update=":mainform:messages" /> 
                                </p:schedule>
                            </h:form>
                        </div>
                    </div> <!-- / .panel Agenda -->

                    <!--Log de Eventos-->
                    <div class="panel widget-notifications">
                        <div class="panel-heading">
                            <span class="panel-title"><i class="panel-title-icon fa fa-fire"></i>Log de Eventos</span>
                        </div> <!-- / .panel-heading -->
                        <div class="panel-body padding-sm">
                            <div class="notifications-list">
                                <ui:repeat value="#{casoController.auditLogsCurrentCase}" var="audit" >
                                    <div class="notification">
                                        <div class="notification-title text-info"><h:outputText value="#{audit.idUser} "/></div>
                                        <div class="notification-description">
                                            <h:outputText rendered="#{not empty audit.campo}"
                                                          value="#{(not empty audit.campo and not empty audit.oldValue) ? audit.campo.concat(' cambió de ').concat(audit.oldValue).concat(' a ').concat(audit.newValue):audit.campo.concat(': ').concat(audit.newValue)}"/>

                                            <h:outputText rendered="#{empty audit.campo}" value="#{audit.newValue}"/>
                                        </div>
                                        <div class="notification-ago"><h:outputText title="#{casoController.formatDate(audit.fecha)}" value="#{casoController.prettyDate(audit.fecha)}"/></div>
                                    </div> <!-- / .notification -->
                                </ui:repeat>
                            </div>
                        </div> <!-- / .panel-body -->
                    </div> <!-- / .panel log de eventos -->


                    <!--Necesitas ayuda?-->
                    <div class="panel no-border panel-dark">
                        <div class="panel-body text-center">
                            <p class="text-lg text-slim">
                                Necesitas ayuda?
                            </p>
                            <div style="margin-top: 20px;">
                                <a href="#" class="btn btn-lg btn-primary btn-flat" data-toggle="modal" data-target="#modal-faq">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>


            </div>


            <script type="text/javascript">
                init.push(function () {
                    // Open nav on mobile
                    $('.mail-nav .navigation li.active a').click(function () {
                        $('.mail-nav .navigation').toggleClass('open');
                        return false;
                    });

                    // Fix navigation if main menu is fixed
                    if ($('body').hasClass('main-menu-fixed')) {
                        $('.mail-nav').addClass('fixed');
                    }



                })
            </script>

        </ui:define>

        <ui:define name="dialogs">


            <h:form id="tasksform">
                <p:dialog header="Tareas" widgetVar="TareasDialog" modal="true" appendTo="@(body)">

                    <div class="col-md-12">
                        <!-- Javascript -->
                        <script>
                            init.push(function () {
                                $('.widget-tasks .panel-body').pixelTasks().sortable({
                                    axis: "y",
                                    handle: ".task-sort-icon",
                                    stop: function (event, ui) {
                                        // IE doesn't register the blur when sorting
                                        // so trigger focusout handlers to remove .ui-state-focus
                                        ui.item.children(".task-sort-icon").triggerHandler("focusout");
                                    }
                                });
                                $('#clear-completed-tasks').click(function () {
                                    $('.widget-tasks .panel-body').pixelTasks('clearCompletedTasks');
                                });
                            });
                        </script>
                        <!-- / Javascript -->

                        <div class="panel widget-tasks panel-dark-gray">
                            <div class="panel-heading">
                                <span class="panel-title"><i class="panel-title-icon fa fa-tasks"></i>Recent tasks</span>
                                <div class="panel-heading-controls">
                                    <button class="btn btn-xs btn-primary btn-outline dark" id="clear-completed-tasks"><i class="fa fa-eraser text-success"></i> Clear completed tasks</button>
                                </div>
                            </div> <!-- / .panel-heading -->
                            <!-- Without vertical padding -->
                            <div class="panel-body no-padding-vr">

                                <div class="task">
                                    <span class="label label-warning pull-right">High</span>
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">A very important task<span>1 hour left</span></a>
                                </div> <!-- / .task -->

                                <div class="task completed">
                                    <span class="label label-warning pull-right">High</span>
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px" checked="checked"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">A very important task<span>58 minutes left</span></a>
                                </div> <!-- / .task -->

                                <div class="task completed">
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px" checked="checked"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">A regular task</a>
                                </div> <!-- / .task -->

                                <div class="task">
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">A regular task</a>
                                </div> <!-- / .task -->

                                <div class="task">
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">A regular task</a>
                                </div> <!-- / .task -->

                                <div class="task">
                                    <span class="label pull-right">Low</span>
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">An unimportant task</a>
                                </div> <!-- / .task -->

                                <div class="task">
                                    <span class="label pull-right">Low</span>
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">An unimportant task</a>
                                </div> <!-- / .task -->

                                <div class="task">
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">A regular task</a>
                                </div> <!-- / .task -->

                                <div class="task">
                                    <span class="label pull-right">Low</span>
                                    <div class="fa fa-arrows-v task-sort-icon"></div>
                                    <div class="action-checkbox">
                                        <label class="px-single"><input type="checkbox" name="" value="" class="px"/><span class="lbl"></span></label>
                                    </div>
                                    <a href="#" class="task-title">An unimportant task</a>
                                </div> <!-- / .task -->
                            </div> <!-- / .panel-body -->
                        </div> <!-- / .panel -->
                    </div>
                    <!-- /13. $RECENT_TASKS -->

                </p:dialog>
            </h:form>

            <p:dialog header="Asignarme el Caso" widgetVar="tomarCaso" modal="true" appendTo="@(body)">
                <h:form>
                    <h:panelGroup layout="block" styleClass="panel form-horizontal no-border">
                        <div class="panel-body">
                            <p:messages globalOnly="true"/>
                            <div class="row form-group">
                                <h:outputText value="¿Está seguro de auto-asignarse el Caso y todos sus Sub-Casos?"
                                              styleClass="text-dafault"/>

                            </div>
                        </div>

                        <div class="panel-footer bg-panel">
                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-default btn-flat" value="#{bundle.no}" 
                                               onclick="PF('tomarCaso').hide()" type="button" immediate="true"/>
                            </div>
                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-primary btn-flat" value="#{bundle.yes}" 
                                               ajax="false"
                                               actionListener="#{casoController.tomarCaso}"/>
                            </div>
                        </div>
                    </h:panelGroup>


                </h:form>
            </p:dialog>



            <p:dialog header="Confirmación" widgetVar="borrarAttachment" modal="true" appendTo="@(body)">
                <h:form>
                    <h:panelGroup layout="block" styleClass="panel form-horizontal no-border">
                        <div class="panel-body">
                            <p:messages globalOnly="true"/>
                            <div class="row form-group">
                                <h:outputText value="¿Esta seguro de borrar el archivo?"
                                              styleClass="text-dafault"/>

                            </div>
                        </div>

                        <div class="panel-footer bg-panel">
                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-default btn-flat" value="#{bundle.no}" 
                                               onclick="PF('borrarAttachment').hide()" type="button" immediate="true"/>
                            </div>
                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-danger btn-flat" value="#{bundle.yesDelete}" 
                                               update=":mainform:messages :formlistaadjuntos :tab-adjuntos-panel :message-details-reply"
                                               actionListener="#{casoController.deleteAttachment(actionEvent)}"/>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:form>
            </p:dialog>

            <p:dialog header="Editar Comentario" widgetVar="Nota" modal="true" appendTo="@(body)">
                <h:form id="formEditNota">
                    <p:messages globalOnly="true"/>


                    <div class="btn-group btn-group-xs">
                        <h:selectBooleanCheckbox 
                            id="textoNotaVisibilidadPublica" value="#{casoController.selectedNota.visible}" 
                            styleClass="switcher"/>
                        <script type="text/javascript">
                            $('.switcher').switcher({
                                theme: 'square',
                                on_state_content: 'Público',
                                off_state_content: 'Privado'
                            });
                        </script>
                    </div>

                    <pe:ckEditor value="#{casoController.selectedNota.texto}" required="true" language="es"
                                 toolbar="#{applicationBean.ckEditorToolbar}"
                                 width="100%"
                                 id="textonota" height="210"/>

                    <hr/>

                    <div class="row">

                        <div class="btn-group">
                            <p:commandLink value="Cancelar" styleClass="btn" type="button"  onclick="PF('Nota').hide()" immediate="true" />
                        </div>

                        <div class="btn-group">
                            <p:commandLink value="Guardar y notificar al cliente" ajax="true"  styleClass="btn"
                                           update=":formint1 :formact :formlistaadjuntos" action="#{casoController.editNota(true)}"/>
                        </div>

                        <div class="btn-group">
                            <p:commandLink ajax="true" styleClass="btn btn-primary"
                                           update=":formint1 :formlistaadjuntos :formact" action="#{casoController.editNota(false)}"
                                           onclick="jQuery(this).addClass('ui-state-disabled');
                                                   jQuery(this).children().addClass('fa fa-refresh fa-spin')">
                                <i class=""></i> Guardar
                            </p:commandLink>
                        </div>

                    </div>







                </h:form>
            </p:dialog>

            <p:dialog header="Antes de cerrar el caso..." widgetVar="closeCase" modal="true" dynamic="true" closeOnEscape="true" closable="true">
                <h:form id="formCerrarCaso">

                    <h:panelGroup layout="block" styleClass="panel form-horizontal no-border">

                        <div class="panel-body">
                            <p:messages globalOnly="true"/>


                            <div class="row form-group">
                                <h:outputText value="Nota: se cerrarán también los sub-casos (casos hijos del caso actual), si existen."
                                              styleClass="text-info"
                                              rendered="#{casoController.selected.tipoCaso ne EnumTipoCaso.ENTREGA.getTipoCaso()}"/>
                                <h:outputText value="Nota: Todos los subcasos deben estar previamente cerrados."
                                              styleClass="text-info"
                                              rendered="#{casoController.selected.tipoCaso eq EnumTipoCaso.ENTREGA.getTipoCaso()}"/>
                            </div>

                            <div class="row form-group">
                                <label class="col-sm-3 control-label" for="idSubEstado2">Estado</label>
                                <div class="col-sm-9">
                                    <h:selectOneMenu id="idSubEstado2" value="#{casoController.selected.idSubEstado}" styleClass="form-control">
                                        <f:selectItems value="#{casoController.itemsSubEstadoCasoAvailableSelectOneCasoCerrado}" 
                                                       var="subEstad" itemDescription="#{subEstad.description}"/>
                                    </h:selectOneMenu>
                                    <p:message for="idSubEstado2" />
                                </div>

                            </div>
                            <div class="row form-group">
                                <label class="col-sm-3 control-label" for="nota">Nota</label>
                                <div class="col-sm-9">
                                    <h:inputTextarea id="nota" required="true" requiredMessage="Ingrese un comentario de cierre del caso."
                                                     value="#{casoController.textoNota}" styleClass="form-control"/>
                                    <p:watermark for="nota" value="Nota de cierre"/>
                                    <p:message for="nota" /> 
                                </div>
                            </div>



                        </div>
                        <div class="panel-footer bg-panel">

                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-default btn-flat" value="Cancelar" ajax="true"  onclick="PF('closeCase').hide()"   />

                            </div>

                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-info btn-flat" value="Cerrar el caso y programar visita preventiva" 
                                               rendered="#{casoController.selected.tipoCaso eq EnumTipoCaso.ENTREGA.getTipoCaso()}"
                                               ajax="true" update=":formCerrarCaso :mainform:messages"
                                               actionListener="#{casoController.cerrarCasoYProgramarVP}"   />
                            </div>
                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-primary btn-flat" value="Aceptar" ajax="true" update="formCerrarCaso :mainform:messages"
                                               actionListener="#{casoController.cerrarCaso}"  />
                            </div>

                        </div>
                    </h:panelGroup>
                </h:form>
            </p:dialog>

            <p:dialog header="Eliminar Caso" widgetVar="destroyCase" modal="true" appendTo="@(body)" closeOnEscape="true">
                <h:form id="formEliminarCaso">
                    <h:panelGroup layout="block" styleClass="panel no-border">
                        <div class="panel-body">
                            <p:messages globalOnly="true"/>

                            <div class="row form-group">
                                <h:outputText value="#{bundle.EliminarCaso}"
                                              styleClass="text-default"/>
                            </div>
                        </div>

                        <div class="panel-footer bg-panel">

                            <div class="btn-group">
                                <p:commandLink value="Cancelar" ajax="true"  onclick="PF('destroyCase').hide()"  styleClass="btn btn-default btn-flat" />
                            </div>
                            <div class="btn-group">
                                <p:commandLink rendered="#{casoController.verificarEliminarCaso()}"
                                               ajax="false" value="Eliminar Caso" action="#{casoController.destroy()}"
                                               styleClass="btn btn-danger btn-flat"/>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:form>
            </p:dialog>

            <p:dialog header="Re-abrir Caso" widgetVar="openCase" modal="true" 
                      appendTo="@(body)" closeOnEscape="true" closable="true">
                <h:form>
                    <h:panelGroup layout="block" styleClass="panel no-border form-horizontal">

                        <div class="panel-body">
                            <p:messages globalOnly="true"/>

                            <div class="row form-group">
                                <h:outputText value="#{bundle.ReabrirCaso}"
                                              styleClass="text-default"/>
                            </div>

                            <div class="row form-group">
                                <label class="col-sm-4 control-label" for="idSubEstadoreopen">Estado</label>
                                <div class="col-sm-8">
                                    <h:selectOneMenu id="idSubEstadoreopen"  styleClass="form-control"
                                                     value="#{casoController.selected.idSubEstado}" >
                                        <f:selectItems value="#{casoController.itemsSubEstadoCasoAvailableSelectOneCasoAbierto}" var="subEstad" itemDescription="#{subEstad.description}"/>

                                    </h:selectOneMenu>
                                    <p:message for="idSubEstadoreopen" />
                                </div>

                            </div>
                        </div>
                        <div class="panel-footer bg-panel">

                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-default btn-flat" value="Cancelar" ajax="true"  
                                               onclick="PF('openCase').hide()"   />

                            </div>

                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-primary btn-flat" 
                                               value="Aceptar" ajax="false" update=":mainform:messages"
                                               actionListener="#{casoController.reabrirCaso}"/>
                            </div>

                        </div>
                    </h:panelGroup>

                </h:form>
            </p:dialog>

            <p:dialog header="Agregar Caso Relacionado" widgetVar="casosRela" modal="true" dynamic="true" closeOnEscape="true" closable="false">
                <h:form id="casosRelForm">

                    <h:panelGroup layout="block" styleClass="panel no-border">
                        <div class="panel-body">
                            <p:messages globalOnly="true"/>

                            <div class="row form-group">
                                <p:autoComplete id="idcasorel" value="#{casoController.idCaserel}" 
                                                completeMethod="#{casoController.complete}"
                                                var="item" itemLabel="#{item.tema}" itemValue="#{item}" forceSelection="true">


                                    <p:column>
                                        <h:outputText value="#{item.clientName}" />
                                    </p:column>

                                    <p:column>
                                        <h:panelGroup layout="block">
                                            <h:outputText styleClass="ticket-status" style="background: \##{item.idSubEstado.backgroundColor}; color: \##{item.idSubEstado.fontColor};" value="#{item.idSubEstado.nombre}"/>
                                            <p:outputLabel id="temalink" value="#{item.tipoCaso.nombre} \##{item.idCaso} #{item.tema} (#{item.notaList.size()})">
                                            </p:outputLabel>
                                            <h:panelGroup rendered="#{item.hasScheduledEvents}">
                                                <i class="fa fa-calendar"></i>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{item.hasAttachments}">
                                                <i class="fa fa-paperclip"></i>    
                                            </h:panelGroup>
                                        </h:panelGroup>
                                    </p:column>
                                </p:autoComplete>
                                <p:watermark for="idcasorel" value="Seleccione un caso para relacionarlo al caso actual"/>
                            </div>
                        </div>

                        <div class="panel-footer bg-panel">

                            <div class="btn-group">
                                <p:commandLink value="Cancelar" ajax="true"  onclick="PF('casosRela').hide()"  styleClass="btn btn-default btn-flat" />
                            </div>
                            <div class="btn-group">
                                <p:commandLink value="Aceptar" rendered="#{casoController.verificarEliminarCaso()}"
                                               ajax="true"  actionListener="#{casoController.agregarRelacionado}"
                                               update=":mainform:messages casosRelForm :inputPanel:tabCasosRelacionados"
                                               styleClass="btn btn-primary btn-flat"/>
                            </div>
                        </div>
                    </h:panelGroup>


                </h:form>
            </p:dialog>

            <p:dialog header="Transferir Caso" widgetVar="transferir" modal="true" appendTo="@(body)" closeOnEscape="true">
                <h:form id="transferForm">

                    <h:panelGroup layout="block" styleClass="panel no-border">
                        <div class="panel-body">
                            <p:messages globalOnly="true"/>

                            <div>
                                <p:selectOneRadio id="tipoTransfer" styleClass="form-control"
                                                  value="#{casoController.tipoTransferOption}" layout="custom">  
                                    <f:selectItem itemLabel="Otro agente" itemValue="1" />  
                                    <f:selectItem itemLabel="Otro cliente" itemValue="2" />                          
                                    <p:ajax update=":transferForm:tipoTransferPanel" listener="#{vistaController.handleAnyChangeEvent()}" /> 
                                </p:selectOneRadio> 
                            </div>

                            <div class="row form-group">
                                <h:inputTextarea id="transferNote" value="#{casoController.textoNota}" styleClass="form-control"
                                                 required="true" 
                                                 requiredMessage="Favor ingrese el motivo."/> 
                                <p:watermark for="transferNote" value="Motivo de transferencia" />
                                <h:message for="transferNote" errorClass="text-danger" infoClass="text-info"/>
                            </div>

                            <div class="row form-group">
                                <label class="col-sm-4 control-label" for="idSubEstadoreopen">Transferir a otro</label>
                                <div class="col-sm-4">
                                    <p:radioButton id="idAgente" for="tipoTransfer" itemIndex="0" /> 
                                    <h:outputLabel value="Agente" for="idAgente" />
                                </div>

                                <div class="col-sm-4">
                                    <p:radioButton id="idCliente" for="tipoTransfer" itemIndex="1"/>  
                                    <h:outputLabel value="Cliente" for="idCliente" />
                                </div>
                            </div>

                            <h:panelGroup id="tipoTransferPanel" styleClass="row form-group">

                                <h:selectOneMenu id="owner1" value="#{casoController.usuarioSeleccionadoTransfer}" 
                                                 styleClass="form-control input-sm select2Input"
                                                 required="true" requiredMessage="Debe Seleccionar un agente si desea transferir el caso."
                                                 rendered="#{casoController.tipoTransferOption eq 1}">

                                    <f:selectItems value="#{usuarioController.itemsAvailableSelectOneNoSystem}"/>
                                </h:selectOneMenu>
                                <h:message for="owner1" errorClass="text-danger" infoClass="text-info"/>


                                <script type="text/javascript">
                                    $(function () {
                                        $(".select2Input").select2({
                                            dropdownAutoWidth: true,
                                            allowClear: true
                                        });
                                    });
                                </script>

                                <p:autoComplete id="emailCl" value="#{casoController.emailClienteSeleccionadoTransfer}" 
                                                completeMethod="#{emailClienteController.completeEmailCliente}"  
                                                var="email" itemValue="#{email}" itemLabel="#{email.emailCliente}"
                                                required="true" requiredMessage="Debe Seleccionar un cliente si desea transferir el caso."
                                                rendered="#{casoController.tipoTransferOption eq 2}">  

                                    <f:facet name="itemtip">  
                                        <h:panelGrid  columns="2" cellpadding="5">  
                                            <f:facet name="header">  
                                                <h:outputText value="#{email.emailCliente}" />  
                                            </f:facet>  

                                            <h:outputText value="Nombre: " />  
                                            <h:outputText value="#{email.cliente.nombres}" />  

                                            <h:outputText value="Apellidos: " />  
                                            <h:outputText value="#{email.cliente.apellidos}" /> 

                                            <h:outputText value="Rut: " />  
                                            <h:outputText value="#{email.cliente.rut}" /> 
                                        </h:panelGrid>  
                                    </f:facet>  

                                </p:autoComplete>  
                                <h:message for="emailCl" errorClass="text-danger" infoClass="text-info"/>

                            </h:panelGroup>
                        </div>

                        <div class="panel-footer bg-panel">

                            <div class="btn-group">
                                <p:commandLink value="Cancelar" 
                                               styleClass="btn btn-default btn-flat"
                                               type="button"  onclick="PF('transferir').hide()"  immediate="true" />
                            </div>
                            <div class="btn-group">
                                <p:commandLink value="Transferir" update=":transferForm :formact :formint1" 
                                               styleClass="btn btn-primary btn-flat"
                                               actionListener="#{casoController.asignarCaso}"  />
                            </div>





                        </div>
                    </h:panelGroup>




                </h:form>
            </p:dialog>


            <p:dialog id="createEventDialog" widgetVar="createEventDialog" header="Evento" 
                      showEffect="fade" hideEffect="fade" closeOnEscape="true" appendTo="@(body)">  
                <h:form id="createEventForm">

                    <h:panelGroup id="eventDetails" layout="block" styleClass="panel form-horizontal no-border">

                        <div class="panel-body">
                            <p:messages globalOnly="true"/>

                            <div class="row form-group">
                                <label class="col-sm-2 control-label" for="title">Titulo</label>
                                <div class="col-sm-10">
                                    <h:inputText id="title" value="#{casoScheduleController.event.title}" styleClass="form-control"
                                                 required="true" requiredMessage="Favor ingrese un titulo para el evento."/> 
                                    <h:message for="title" errorClass="text-danger" infoClass="text-info"/>
                                </div>

                            </div>
                            <h:panelGroup id="Fechapanel" layout="block" styleClass="row form-group" >
                                <label class="col-sm-2 control-label" for="">Fecha</label>
                                <div class="col-sm-10">
                                    <h:panelGroup styleClass="row">
                                        <div class="col-sm-4 form-group">
                                            <p:inputMask id="from" value="#{casoScheduleController.event.startDate}" size="14"
                                                         styleClass="form-control datepicker"
                                                         mask="99/99/9999 99:99" required="true" requiredMessage="Favor ingrese fecha y hora de comienzo.">  
                                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />  
                                            </p:inputMask>  
                                        </div>
                                        <div class="col-sm-2 form-group">
                                            <h:outputLabel for="to" value="Hasta " />  

                                        </div>
                                        <div class="col-sm-4 form-group">
                                            <p:inputMask id="to" value="#{casoScheduleController.event.endDate}" size="14"
                                                         styleClass="form-control datepicker"
                                                         mask="99/99/9999 99:99" required="true" requiredMessage="Favor ingrese fecha y hora de término.">  
                                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />  
                                            </p:inputMask>
                                        </div>

                                        <div class="row col-sm-2 form-group">
                                            <div class="col-sm-6">
                                                <h:selectBooleanCheckbox id="allDay" value="#{casoScheduleController.event.allDay}"
                                                                         label="Todo el dia"/>
                                            </div>
                                            <div class="col-sm-6">
                                                <h:outputLabel for="allDay" value="Todo el día"/> 
                                            </div>

                                        </div>

                                    </h:panelGroup>

                                    <p:message for="from"/>
                                    <p:message for="to"/>
                                    <p:message for="allDay"/>
                                </div>

                                <script type="text/javascript">

                                    $('.datepicker').datetimepicker({
                                        language: 'es',
                                        format: 'dd/mm/yyyy hh:ii',
                                        viewformat: 'dd/mm/yyyy hh:ii',
                                        todayBtn: true,
                                        autoclose: true,
                                        todayHighlight: true,
                                        weekStart: 1,
                                        forceParse: true
                                    });

                                </script>

                            </h:panelGroup>

                            <h:panelGroup id="invitadospanel" layout="block" styleClass="row" >
                                <div class="form-group no-margin-hr">
                                    <label class="col-sm-2 control-label" for="invitados">Invitados</label>
                                    <div class="col-sm-10">
                                        <h:selectManyListbox id="invitados" label="Seleccione un agente" 
                                                             value="#{casoScheduleController.event.data.usuariosInvitedList}"
                                                             styleClass="form-control input-sm select2Multiple"
                                                             required="true" requiredMessage="Debe Seleccionar un ejecutivo/agente a invitar."
                                                             converter="UsuarioConverter" converterMessage="Error de conversión.">

                                            <f:selectItems value="#{usuarioController.itemsAvailableForSelect}" var="user"
                                                           itemLabel="#{user.capitalName}" itemValue="#{user}"/>
                                        </h:selectManyListbox>
                                        <h:message for="invitados" errorClass="text-danger" infoClass="text-info"/>
                                    </div>

                                </div>

                                <script type="text/javascript">
                                    $(function () {$(".select2Multiple").select2({
                                        dropdownAutoWidth: true,
                                        allowClear: true
                                    });});
                                </script>

                            </h:panelGroup>


                            <div class="row form-group">
                                <label class="col-sm-2 control-label" for="">Recursos</label>
                                <div class="col-sm-10">
                                    <h:selectManyListbox id="resources" label="Seleccione un recurso" 
                                                         value="#{casoScheduleController.event.data.resourceList}"
                                                         styleClass="form-control input-sm select2Multiple"
                                                         converter="resourceConverter" converterMessage="Error de conversión.">
                                        <f:selectItems value="#{resourceController.itemsAvailableForSelect}" var="r"
                                                       itemLabel="#{r.nombre}" itemValue="#{r}"/>
                                    </h:selectManyListbox>
                                    <h:message for="resources" errorClass="text-danger" infoClass="text-info"/>
                                </div>

                            </div>

                            <div class="row form-group">
                                <label class="col-sm-2 control-label pull-left" for="recordatorios">Recordatorios</label>
                                <div class="col-sm-10">
                                    <p:panel id="recordatpanel">

                                        <ui:repeat id="recordatorios" value="#{casoScheduleController.event.data.scheduleEventReminderList}" var="reminder" >

                                            <h:panelGrid columns="4">
                                                <h:selectOneMenu id="reminderType" styleClass="form-control"
                                                                 value="#{reminder.reminderType}" 
                                                                 required="true" requiredMessage="Se requiere ...">

                                                    <f:selectItem itemLabel="Correo" itemValue="EMAIL"/>
                                                    <f:selectItem itemLabel="Ventana emergente" itemValue="POPUP" itemDisabled="true"/>
                                                </h:selectOneMenu>

                                                <h:inputText id="quantityTime" value="#{reminder.quantityTime}" size="3" required="true" 
                                                             styleClass="form-control"/>

                                                <h:selectOneMenu id="unitOfTimeInMinutes" styleClass="form-control"
                                                                 value="#{reminder.unitOfTimeInMinutes}" 
                                                                 required="true" requiredMessage="Se requiere ...">
                                                    <f:selectItem itemLabel="minutos" itemValue="1"/>
                                                    <f:selectItem itemLabel="horas" itemValue="60"/>
                                                    <f:selectItem itemLabel="días" itemValue="1440"/>
                                                    <f:selectItem itemLabel="semanas" itemValue="10080"/>
                                                </h:selectOneMenu>

                                                <p:commandLink update=":createEventForm:eventDetails" process="@this"
                                                               styleClass="btn btn-danger btn-outline"
                                                               actionListener="#{casoScheduleController.removeScheduleEventReminder(reminder)}" >
                                                    <i class="fa fa-times"></i>
                                                </p:commandLink>

                                            </h:panelGrid>


                                        </ui:repeat>
                                        <p:commandLink value="Agregar recordatorio" style="color: #006dcc" immediate="true"
                                                       actionListener="#{casoScheduleController.addNewScheduleEventReminder()}" 
                                                       update=":createEventForm:recordatpanel"/>
                                    </p:panel>
                                </div>




                            </div>
                        </div>
                        <div class="panel-footer bg-panel">

                            <div class="btn-group">
                                <p:commandLink value="Cancelar" 
                                               styleClass="btn btn-default btn-flat"
                                               type="button"  onclick="PF('createEventDialog').hide()"  immediate="true" />
                            </div>
                            
                            <div class="btn-group">
                                <p:commandLink type="reset"  styleClass="btn btn-default btn-flat"
                                               value="Reset" update=":createEventForm:eventDetails"/>  
                            </div>
                            <div class="btn-group">
                                <p:commandLink styleClass="btn btn-primary btn-flat" id="addButton" 
                                               actionListener="#{casoScheduleController.addEvent()}"
                                               update=":createEventForm:eventDetails" >
                                    <i class="fa fa-disk"></i>Guardar                        
                                </p:commandLink>
                            </div>
                        </div>

                    </h:panelGroup>


                </h:form>
            </p:dialog>





        </ui:define>




    </ui:composition>

</html>
